# ==============================================
# Apartment Management SaaS - Environment Variables
# ==============================================
#
# SECURITY WARNING:
# - Never commit the actual .env file to version control
# - Generate strong, unique secrets for production
# - Rotate secrets regularly
# - Use different secrets for each environment
#
# Copy this file to .env.local (development) or .env.production (production)
# Most values have sensible defaults in docker-compose.yml
# ==============================================

# ================================
# Node Environment
# ================================
NODE_ENV=production

# ================================
# Docker Images & Versions
# ================================
MYSQL_VERSION=8.0
REDIS_VERSION=7-alpine
MAILPIT_VERSION=latest
PHPMYADMIN_VERSION=latest
REDIS_COMMANDER_VERSION=latest

# ================================
# Container Names (Optional)
# ================================
# MYSQL_CONTAINER_NAME=apartment-mysql
# REDIS_CONTAINER_NAME=apartment-redis
# MAILPIT_CONTAINER_NAME=apartment-mailpit
# BACKEND_CONTAINER_NAME=apartment-backend
# FRONTEND_CONTAINER_NAME=apartment-frontend
# PHPMYADMIN_CONTAINER_NAME=apartment-phpmyadmin
# REDIS_COMMANDER_CONTAINER_NAME=apartment-redis-commander

# ================================
# Port Configuration
# ================================
# External ports for accessing services
MYSQL_PORT=3307
REDIS_PORT_EXTERNAL=6380
BACKEND_PORT=3000
FRONTEND_PORT=3001
PHPMYADMIN_PORT=8082
REDIS_COMMANDER_PORT=8081
MAILPIT_SMTP_PORT=1025
MAILPIT_UI_PORT=8025

# Internal ports (used within Docker network)
DB_PORT=3306
REDIS_PORT_INTERNAL=6379

# ================================
# Application Configuration
# ================================
API_PREFIX=api
APP_NAME=Apartment Management SaaS
BASE_URL=https://yourdomain.com
FRONTEND_URL=https://app.yourdomain.com

# Build target (development or production)
BUILD_TARGET=production

# ================================
# Database Configuration
# ================================
DB_DATABASE=apartment_management
DB_USERNAME=apartment_user
DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD
MYSQL_ROOT_PASSWORD=CHANGE_ME_ROOT_PASSWORD

# Database host (use 'mysql' in Docker, 'localhost' for local)
DB_HOST=mysql

# Database Settings
DB_LOGGING=false
DB_SYNCHRONIZE=false
DB_RUN_MIGRATIONS=true
DB_MIGRATIONS_RUN=false

# Database Connection Pool
DB_POOL_SIZE=20
DB_POOL_ACQUIRE_TIMEOUT=30000
DB_POOL_IDLE_TIMEOUT=10000
DB_POOL_MAX_REUSES=100

# MySQL Performance Settings
MYSQL_MAX_CONNECTIONS=500
MYSQL_BUFFER_POOL_SIZE=1G
MYSQL_LOG_FILE_SIZE=256M

# ================================
# Redis Configuration
# ================================
# Redis host (use 'redis' in Docker, 'localhost' for local)
REDIS_HOST=redis
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=3600

# ================================
# JWT & Authentication
# ================================
# CRITICAL SECURITY: Generate strong random secrets
# Example: openssl rand -base64 64
# NEVER use the same secret in different environments
JWT_SECRET=CHANGE_ME_GENERATE_STRONG_RANDOM_SECRET_64_CHARS_MIN
JWT_EXPIRES_IN=15m
JWT_REFRESH_SECRET=CHANGE_ME_GENERATE_DIFFERENT_STRONG_RANDOM_SECRET_64_CHARS_MIN
JWT_REFRESH_EXPIRES_IN=7d

# ================================
# Session Management
# ================================
SESSION_PREFIX=session:
SESSION_TTL=900
REFRESH_SESSION_PREFIX=refresh:
REFRESH_SESSION_TTL=604800

# ================================
# Email Configuration
# ================================
# For development, use mailpit (Docker service name)
# For production, use your SMTP provider
MAIL_HOST=mailpit
MAIL_PORT=1025
MAIL_USER=
MAIL_PASSWORD=
MAIL_FROM_NAME=Apartment Management
MAIL_FROM_EMAIL=noreply@yourdomain.com
MAIL_SECURE=false

# Mailpit Settings (Development)
MAILPIT_MAX_MESSAGES=5000

# ================================
# Security Configuration
# ================================
# REQUIRED: Comma-separated list of allowed CORS origins
CORS_ORIGINS=https://app.yourdomain.com,https://yourdomain.com
CSRF_ENABLED=true
HELMET_ENABLED=true

# ================================
# Rate Limiting
# ================================
THROTTLE_TTL=60
THROTTLE_LIMIT=100

# ================================
# Queue Configuration (BullMQ)
# ================================
QUEUE_REDIS_HOST=redis
QUEUE_REDIS_PORT=6379
QUEUE_REDIS_PASSWORD=
QUEUE_REDIS_DB=1
QUEUE_JOB_ATTEMPTS=3
QUEUE_JOB_BACKOFF_DELAY=60000
QUEUE_COMPLETED_JOB_AGE=86400
QUEUE_FAILED_JOB_AGE=604800

# ================================
# Reminders Configuration
# ================================
REMINDER_DUE_SOON_DAYS=3
REMINDER_DUE_SOON_CRON=0 8 * * *
REMINDER_OVERDUE_CRON=0 9 * * *
REMINDER_OVERDUE_INTERVAL_DAYS=7
REMINDER_MAX_RETRIES=3

# ================================
# Feature Flags
# ================================
FEATURE_TENANT_PORTAL=true
FEATURE_FILE_UPLOAD=true
FEATURE_AUDIT_LOG=true
FEATURE_QUEUE_ENABLED=true

# ================================
# phpMyAdmin Configuration
# ================================
PHPMYADMIN_UPLOAD_LIMIT=100M

# ================================
# Network Configuration
# ================================
NETWORK_NAME=apartment_network

# ================================
# Frontend Configuration
# ================================
NEXT_PUBLIC_API_URL=http://localhost:3000/api/v1

# ================================
# File Storage (Optional - AWS S3)
# ================================
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=CHANGE_ME
# AWS_SECRET_ACCESS_KEY=CHANGE_ME
# AWS_S3_BUCKET=apartment-management-files
# AWS_S3_ENDPOINT=https://s3.amazonaws.com

# ================================
# Monitoring & Logging (Optional)
# ================================
# LOG_LEVEL=info
# SENTRY_DSN=your-sentry-dsn
# PROMETHEUS_ENABLED=true
